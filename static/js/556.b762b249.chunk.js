"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[556],{556:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s(43),a=s(575),n=s(19),l=s(935),c=s(579);function d(){var e;const{BANK:t,deck:s,settings:d}=(0,a.P)(),i=(0,r.useMemo)(()=>(0,n.xe)(t,s),[t,s]),[o,x]=(0,r.useState)(()=>new Set),[h,m]=(0,r.useState)(!1),b=(0,r.useMemo)(()=>{if(!h)return i;const e=new Set(Array.from(o));return i.filter(t=>e.has(t.id))},[i,h,o]),[u,p]=(0,r.useState)(0),g=(0,r.useMemo)(()=>(0,l.k)(b).slice(0,d.cramLength||25),[b,d.cramLength,u]),[v,j]=(0,r.useState)(0),[w,N]=(0,r.useState)(!1),[f,y]=(0,r.useState)(0),[k,z]=(0,r.useState)(0),S=0===g.length,C=S?void 0:g[v],A=S?0:(v+(w?1:0))/g.length,E=!!C&&o.has(C.id),M=(0,r.useCallback)(()=>{N(e=>(e||z(e=>e+1),!e))},[]),L=(0,r.useCallback)(e=>{S||(N(!1),j(t=>{const s=(t+e+g.length)%g.length;return e>0&&y(e=>Math.min(e+1,g.length)),s}))},[S,g.length]),T=(0,r.useCallback)(()=>L(1),[L]),R=(0,r.useCallback)(()=>L(-1),[L]),P=(0,r.useCallback)(()=>{C&&x(e=>{const t=new Set(e);return t.has(C.id)?t.delete(C.id):t.add(C.id),t})},[C]),B=(0,r.useCallback)(()=>{p(e=>e+1),j(0),N(!1),y(0),z(0)},[]);(0,r.useEffect)(()=>{const e=e=>{var t;const s=e.target&&e.target.tagName||"";"INPUT"!==s&&"TEXTAREA"!==s&&("Space"===e.code?(e.preventDefault(),M()):"ArrowRight"===e.key||"Enter"===e.key?T():"ArrowLeft"===e.key?R():"s"===(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())&&P())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[T,R,M,P]);const[D,F]=(0,r.useState)(!0),[I,_]=(0,r.useState)(900);return(0,r.useEffect)(()=>{if(!D||!w||S)return;const e=setTimeout(()=>T(),I);return()=>clearTimeout(e)},[w,D,I,T,S]),(0,c.jsxs)("div",{className:"p-6 rounded-2xl border border-white/10 bg-zinc-900/60",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsxs)("div",{className:"text-xs uppercase tracking-wider text-emerald-400/90",children:["Cram \u2022 ",s]}),(0,c.jsxs)("div",{className:"text-xs text-zinc-400 space-x-3",children:[(0,c.jsxs)("span",{children:["Cards: ",g.length]}),(0,c.jsxs)("span",{children:["Seen: ",f]}),(0,c.jsxs)("span",{children:["Revealed: ",k]})]})]}),(0,c.jsx)("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden mb-4",children:(0,c.jsx)("div",{className:"h-full bg-emerald-500 transition-all",style:{width:"".concat(100*Math.min(A,1)||0,"%")}})}),S?(0,c.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-6",children:[(0,c.jsx)("div",{className:"text-sm mb-3",children:h?"No starred cards yet in this deck.":"No cards in this deck yet."}),h&&(0,c.jsx)("button",{onClick:()=>m(!1),className:"px-3 py-2 rounded bg-emerald-600/80 hover:bg-emerald-600",children:"Show all"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsxs)("div",{className:"text-[11px] uppercase tracking-wider text-zinc-400",children:[v+1,"/",g.length]}),(0,c.jsx)("button",{onClick:P,className:"px-2 py-1 text-xs rounded border "+(E?"bg-yellow-500/20 border-yellow-400/40 text-yellow-200":"bg-zinc-800 border-white/10 text-zinc-300 hover:bg-zinc-700"),children:E?"\u2605 Starred":"\u2606 Star"})]}),(0,c.jsx)("div",{className:"text-lg font-medium mb-3",children:C.prompt}),(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsxs)("button",{className:"text-xs px-2 py-1 rounded border "+(w?"bg-zinc-700 border-white/10":"bg-zinc-800 border-white/10 hover:bg-zinc-700"),onClick:M,children:[w?"Hide":"Reveal"," (Space)"]}),(0,c.jsxs)("label",{className:"text-xs text-zinc-300 flex items-center gap-1",children:[(0,c.jsx)("input",{type:"checkbox",className:"accent-emerald-500",checked:D,onChange:e=>F(e.target.checked)}),"Auto-advance"]}),(0,c.jsxs)("label",{className:"text-xs text-zinc-300 flex items-center gap-1",children:[(0,c.jsx)("span",{children:"Delay"}),(0,c.jsx)("select",{className:"bg-zinc-800 border border-white/10 rounded px-2 py-1 text-xs",value:I,onChange:e=>_(Number(e.target.value)),children:[700,900,1200,1500,2e3].map(e=>(0,c.jsxs)("option",{value:e,children:[e," ms"]},e))})]}),(0,c.jsxs)("label",{className:"ml-auto text-xs text-zinc-300 flex items-center gap-1",children:[(0,c.jsx)("input",{type:"checkbox",className:"accent-emerald-500",checked:h,onChange:e=>{m(e.target.checked),j(0),N(!1),y(0),z(0)}}),"Starred only"]})]}),w&&(0,c.jsxs)("div",{className:"mt-3 text-sm space-y-2",children:["tf"===C.type&&(0,c.jsxs)("div",{className:"px-3 py-2 rounded border bg-zinc-800 border-white/10",children:["Answer:"," ",(0,c.jsx)("b",{className:"text-emerald-300",children:C.answerBool?"True":"False"})]}),"mc"===C.type&&(0,c.jsxs)("div",{className:"px-3 py-2 rounded border bg-zinc-800 border-white/10",children:["Correct:"," ",(0,c.jsx)("b",{className:"text-emerald-300",children:null===(e=C.options)||void 0===e?void 0:e[C.answerIndex]})]}),"recall"===C.type&&(0,c.jsxs)("div",{className:"px-3 py-2 rounded border bg-zinc-800 border-white/10",children:["Expected: ",(0,c.jsx)("b",{className:"text-emerald-300",children:C.expected})]}),C.explain&&(0,c.jsx)("div",{className:"text-zinc-300/90",children:C.explain})]})]}),(0,c.jsxs)("div",{className:"mt-5 flex items-center justify-between",children:[(0,c.jsx)("button",{onClick:R,className:"px-3 py-2 rounded bg-zinc-800 border border-white/10 hover:bg-zinc-700",children:"\u2190 Prev"}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("button",{onClick:B,className:"px-3 py-2 rounded bg-zinc-800 border border-white/10 hover:bg-zinc-700",children:"Reshuffle"}),(0,c.jsx)("button",{onClick:T,className:"px-3 py-2 rounded bg-emerald-600/80 hover:bg-emerald-600",children:"Next \u2192"})]})]}),(0,c.jsxs)("div",{className:"mt-3 text-[11px] text-zinc-500",children:["Shortcuts: ",(0,c.jsx)("b",{children:"Space"})," reveal \u2022 ",(0,c.jsx)("b",{children:"\u2190/\u2192"})," prev/next \u2022 ",(0,c.jsx)("b",{children:"S"})," star"]})]})]})}},935:(e,t,s)=>{function r(e){const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t}s.d(t,{k:()=>r})}}]);
//# sourceMappingURL=556.b762b249.chunk.js.map